(function(A,b){typeof exports=="object"&&typeof module<"u"?b(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],b):(A=typeof globalThis<"u"?globalThis:A||self,b(A["@realzero_cha/dynamicList"]={},A.React))})(this,function(A,b){"use strict";var X={exports:{}},z={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q;function ne(){if(Q)return z;Q=1;var n=Symbol.for("react.transitional.element"),R=Symbol.for("react.fragment");function v(f,l,i){var d=null;if(i!==void 0&&(d=""+i),l.key!==void 0&&(d=""+l.key),"key"in l){i={};for(var t in l)t!=="key"&&(i[t]=l[t])}else i=l;return l=i.ref,{$$typeof:n,type:f,key:d,ref:l!==void 0?l:null,props:i}}return z.Fragment=R,z.jsx=v,z.jsxs=v,z}var F={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K;function oe(){return K||(K=1,process.env.NODE_ENV!=="production"&&function(){function n(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===N?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case p:return"Fragment";case y:return"Profiler";case x:return"StrictMode";case B:return"Suspense";case U:return"SuspenseList";case E:return"Activity"}if(typeof e=="object")switch(typeof e.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),e.$$typeof){case o:return"Portal";case P:return(e.displayName||"Context")+".Provider";case M:return(e._context.displayName||"Context")+".Consumer";case D:var r=e.render;return e=e.displayName,e||(e=r.displayName||r.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case J:return r=e.displayName||null,r!==null?r:n(e.type)||"Memo";case h:r=e._payload,e=e._init;try{return n(e(r))}catch{}}return null}function R(e){return""+e}function v(e){try{R(e);var r=!1}catch{r=!0}if(r){r=console;var a=r.error,u=typeof Symbol=="function"&&Symbol.toStringTag&&e[Symbol.toStringTag]||e.constructor.name||"Object";return a.call(r,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",u),R(e)}}function f(e){if(e===p)return"<>";if(typeof e=="object"&&e!==null&&e.$$typeof===h)return"<...>";try{var r=n(e);return r?"<"+r+">":"<...>"}catch{return"<...>"}}function l(){var e=Y.A;return e===null?null:e.getOwner()}function i(){return Error("react-stack-top-frame")}function d(e){if(V.call(e,"key")){var r=Object.getOwnPropertyDescriptor(e,"key").get;if(r&&r.isReactWarning)return!1}return e.key!==void 0}function t(e,r){function a(){k||(k=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",r))}a.isReactWarning=!0,Object.defineProperty(e,"key",{get:a,configurable:!0})}function m(){var e=n(this.type);return S[e]||(S[e]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),e=this.props.ref,e!==void 0?e:null}function T(e,r,a,u,j,I,H,Z){return a=I.ref,e={$$typeof:w,type:e,key:r,props:I,_owner:j},(a!==void 0?a:null)!==null?Object.defineProperty(e,"ref",{enumerable:!1,get:m}):Object.defineProperty(e,"ref",{enumerable:!1,value:null}),e._store={},Object.defineProperty(e._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(e,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(e,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:H}),Object.defineProperty(e,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:Z}),Object.freeze&&(Object.freeze(e.props),Object.freeze(e)),e}function g(e,r,a,u,j,I,H,Z){var c=r.children;if(c!==void 0)if(u)if(O(c)){for(u=0;u<c.length;u++)s(c[u]);Object.freeze&&Object.freeze(c)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else s(c);if(V.call(r,"key")){c=n(e);var L=Object.keys(r).filter(function(le){return le!=="key"});u=0<L.length?"{key: someKey, "+L.join(": ..., ")+": ...}":"{key: someKey}",re[c+u]||(L=0<L.length?"{"+L.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,u,c,L,c),re[c+u]=!0)}if(c=null,a!==void 0&&(v(a),c=""+a),d(r)&&(v(r.key),c=""+r.key),"key"in r){a={};for(var q in r)q!=="key"&&(a[q]=r[q])}else a=r;return c&&t(a,typeof e=="function"?e.displayName||e.name||"Unknown":e),T(e,c,I,j,l(),a,H,Z)}function s(e){typeof e=="object"&&e!==null&&e.$$typeof===w&&e._store&&(e._store.validated=1)}var _=b,w=Symbol.for("react.transitional.element"),o=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),M=Symbol.for("react.consumer"),P=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),J=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),N=Symbol.for("react.client.reference"),Y=_.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=Object.prototype.hasOwnProperty,O=Array.isArray,C=console.createTask?console.createTask:function(){return null};_={"react-stack-bottom-frame":function(e){return e()}};var k,S={},G=_["react-stack-bottom-frame"].bind(_,i)(),te=C(f(i)),re={};F.Fragment=p,F.jsx=function(e,r,a,u,j){var I=1e4>Y.recentlyCreatedOwnerStacks++;return g(e,r,a,!1,u,j,I?Error("react-stack-top-frame"):G,I?C(f(e)):te)},F.jsxs=function(e,r,a,u,j){var I=1e4>Y.recentlyCreatedOwnerStacks++;return g(e,r,a,!0,u,j,I?Error("react-stack-top-frame"):G,I?C(f(e)):te)}}()),F}var $;function ae(){return $||($=1,process.env.NODE_ENV==="production"?X.exports=ne():X.exports=oe()),X.exports}var W=ae();const ie=({position:n,rects:R,horizontal:v,flexWrap:f})=>{if(R.length===0)return-1;let l=-1,i=1/0;const d=R.reduce((t,m)=>(t.top=Math.min(t.top,m.top),t.left=Math.min(t.left,m.left),t.right=Math.max(t.right,m.right),t.bottom=Math.max(t.bottom,m.bottom),t),{top:1/0,left:1/0,right:-1/0,bottom:-1/0});return R.forEach((t,m)=>{let T;if(f)if(n.x>=d.left&&n.x<=d.right&&n.y>=d.top&&n.y<=d.bottom){const g=t.left+t.width/2,s=t.top+t.height/2;T=Math.sqrt(Math.pow(n.x-g,2)+Math.pow(n.y-s,2))}else{const g=Math.max(t.left-n.x,0,n.x-t.right),s=Math.max(t.top-n.y,0,n.y-t.bottom);T=Math.sqrt(Math.pow(g,2)+Math.pow(s,2))}else{const g=v?t.left+t.width/2:t.top+t.height/2;T=Math.abs(v?n.x-g:n.y-g)}T<i&&(i=T,l=m)}),l},ee=({initialData:n,horizontal:R,flexWrap:v,staticMove:f=!1,onDragStart:l,onDragMove:i,onDragEnd:d})=>{const[t,m]=b.useState(n),[T,g]=b.useState(null),[s,_]=b.useState(null),[w,o]=b.useState(null),[p,x]=b.useState({width:0,height:0}),[y,M]=b.useState(null),P=b.useRef(n),D=b.useRef(null),B=(h,E)=>{h.preventDefault();const N=h.currentTarget.getBoundingClientRect();_(E),o(t[E]),x({width:N.width,height:N.height}),g({x:h.clientX,y:h.clientY}),P.current=t,l?.(t,E)},U=h=>{if(s===null||!D.current)return;const E={x:h.clientX,y:h.clientY};g(E);const Y=Array.from(D.current.children).map(k=>k.getBoundingClientRect()),V=f||s===-1?Y:Y.filter((k,S)=>S!==s),O=ie({position:E,rects:V,horizontal:R,flexWrap:v});if(O===-1||O===null)return;let C=O;if(O>=s&&(C=O+1),f)M(O);else{const k=t.findIndex(S=>S===w);if(k!==-1&&C!==k){const S=[...t],[G]=S.splice(k,1);S.splice(C,0,G),m(S)}}i?.(t,s)},J=()=>{if(s===null)return;let h=-1;if(f)if(y!==null&&y!==s){const E=[...P.current],[N]=E.splice(s,1);E.splice(y,0,N),m(E),h=y}else m(P.current),h=s;else h=t.findIndex(E=>E===w);d?.(t,h),_(null),o(null),g(null),M(null)};return b.useEffect(()=>(w&&(window.addEventListener("mousemove",U),window.addEventListener("mouseup",J)),()=>{window.removeEventListener("mousemove",U),window.removeEventListener("mouseup",J)}),[s,w,y,t,f]),{list:t,listRef:D,draggingItem:s,draggingItemData:w,position:T,dragItemSize:p,dropTargetIndex:f?y:null,itemDrag:B,itemMove:U,itemDrop:J}},se=n=>{const{items:R,renderItem:v,getKey:f,type:l,staticMove:i=!1,onDragStart:d,onDragMove:t,onDragEnd:m,containerStyle:T,itemStyle:g,targetItemStyle:s}=n;let _=null,w=null,o=null;if(n.type==="grid"){const{cols:p,rows:x}=n;o=ee({initialData:R,flexWrap:!0,staticMove:i,onDragStart:d,onDragMove:t,onDragEnd:m}),_={display:"grid",gridTemplateColumns:p?`repeat(${p}, minmax(0, 1fr))`:void 0,gridTemplateRows:x?`repeat(${x}, minmax(0, 1fr))`:void 0}}else if(n.type==="flex"){const{horizontal:p=!1,flexWrap:x=!1,uniformSize:y}=n;o=ee({initialData:R,horizontal:p,flexWrap:x,staticMove:i,onDragStart:d,onDragMove:t,onDragEnd:m}),_={display:"flex",flexWrap:x?"wrap":void 0,flexDirection:p?"row":"column"},w={flex:y?1:void 0}}if(o)return W.jsxs(W.Fragment,{children:[W.jsx("ul",{ref:o.listRef,className:"dynamic-list-container",style:{position:"relative",listStyle:"none",padding:"0",margin:"0",...T,..._},children:o.list.map((p,x)=>{const y=!i&&p===o.draggingItemData,M=y&&o.position?{display:"none"}:{transition:"transform 0.2s ease",...w},P=i&&x===o.dropTargetIndex;return W.jsx("li",{onMouseDown:D=>o.itemDrag(D,x),className:`dynamic-list-item ${y?"grabbed":"not-grabbed"} ${P?"drop-target":""}`,style:{...M,...g},children:v(p)},f?.(p)||x)})}),o.draggingItemData&&o.position&&W.jsx("div",{className:"dynamic-list-item grabbed",style:{position:"absolute",zIndex:1e3,left:o.position.x-o.dragItemSize.width/2,top:o.position.y-o.dragItemSize.height/2,width:o.dragItemSize.width,height:o.dragItemSize.height,...s},children:v(o.draggingItemData)})]})};A.DynamicList=se,Object.defineProperty(A,Symbol.toStringTag,{value:"Module"})});
