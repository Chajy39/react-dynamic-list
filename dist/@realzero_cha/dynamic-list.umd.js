(function(N,x){typeof exports=="object"&&typeof module<"u"?x(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],x):(N=typeof globalThis<"u"?globalThis:N||self,x(N["@realzero_cha/dynamicList"]={},N.React))})(this,function(N,x){"use strict";var X={exports:{}},W={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $;function ne(){if($)return W;$=1;var n=Symbol.for("react.transitional.element"),y=Symbol.for("react.fragment");function m(d,i,c){var f=null;if(c!==void 0&&(f=""+c),i.key!==void 0&&(f=""+i.key),"key"in i){c={};for(var t in i)t!=="key"&&(c[t]=i[t])}else c=i;return i=c.ref,{$$typeof:n,type:d,key:f,ref:i!==void 0?i:null,props:c}}return W.Fragment=y,W.jsx=m,W.jsxs=m,W}var U={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K;function ae(){return K||(K=1,process.env.NODE_ENV!=="production"&&function(){function n(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===R?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case o:return"Fragment";case _:return"Profiler";case S:return"StrictMode";case L:return"Suspense";case B:return"SuspenseList";case v:return"Activity"}if(typeof e=="object")switch(typeof e.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),e.$$typeof){case s:return"Portal";case M:return(e.displayName||"Context")+".Provider";case T:return(e._context.displayName||"Context")+".Consumer";case O:var r=e.render;return e=e.displayName,e||(e=r.displayName||r.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case G:return r=e.displayName||null,r!==null?r:n(e.type)||"Memo";case Y:r=e._payload,e=e._init;try{return n(e(r))}catch{}}return null}function y(e){return""+e}function m(e){try{y(e);var r=!1}catch{r=!0}if(r){r=console;var l=r.error,g=typeof Symbol=="function"&&Symbol.toStringTag&&e[Symbol.toStringTag]||e.constructor.name||"Object";return l.call(r,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",g),y(e)}}function d(e){if(e===o)return"<>";if(typeof e=="object"&&e!==null&&e.$$typeof===Y)return"<...>";try{var r=n(e);return r?"<"+r+">":"<...>"}catch{return"<...>"}}function i(){var e=A.A;return e===null?null:e.getOwner()}function c(){return Error("react-stack-top-frame")}function f(e){if(J.call(e,"key")){var r=Object.getOwnPropertyDescriptor(e,"key").get;if(r&&r.isReactWarning)return!1}return e.key!==void 0}function t(e,r){function l(){z||(z=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",r))}l.isReactWarning=!0,Object.defineProperty(e,"key",{get:l,configurable:!0})}function a(){var e=n(this.type);return P[e]||(P[e]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),e=this.props.ref,e!==void 0?e:null}function h(e,r,l,g,C,D,Z,q){return l=D.ref,e={$$typeof:j,type:e,key:r,props:D,_owner:C},(l!==void 0?l:null)!==null?Object.defineProperty(e,"ref",{enumerable:!1,get:a}):Object.defineProperty(e,"ref",{enumerable:!1,value:null}),e._store={},Object.defineProperty(e._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(e,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(e,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:Z}),Object.defineProperty(e,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:q}),Object.freeze&&(Object.freeze(e.props),Object.freeze(e)),e}function b(e,r,l,g,C,D,Z,q){var p=r.children;if(p!==void 0)if(g)if(H(p)){for(g=0;g<p.length;g++)E(p[g]);Object.freeze&&Object.freeze(p)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else E(p);if(J.call(r,"key")){p=n(e);var F=Object.keys(r).filter(function(ce){return ce!=="key"});g=0<F.length?"{key: someKey, "+F.join(": ..., ")+": ...}":"{key: someKey}",re[p+g]||(F=0<F.length?"{"+F.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,g,p,F,p),re[p+g]=!0)}if(p=null,l!==void 0&&(m(l),p=""+l),f(r)&&(m(r.key),p=""+r.key),"key"in r){l={};for(var Q in r)Q!=="key"&&(l[Q]=r[Q])}else l=r;return p&&t(l,typeof e=="function"?e.displayName||e.name||"Unknown":e),h(e,p,D,C,i(),l,Z,q)}function E(e){typeof e=="object"&&e!==null&&e.$$typeof===j&&e._store&&(e._store.validated=1)}var u=x,j=Symbol.for("react.transitional.element"),s=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),M=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),R=Symbol.for("react.client.reference"),A=u.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=Object.prototype.hasOwnProperty,H=Array.isArray,I=console.createTask?console.createTask:function(){return null};u={"react-stack-bottom-frame":function(e){return e()}};var z,P={},k=u["react-stack-bottom-frame"].bind(u,c)(),V=I(d(c)),re={};U.Fragment=o,U.jsx=function(e,r,l,g,C){var D=1e4>A.recentlyCreatedOwnerStacks++;return b(e,r,l,!1,g,C,D?Error("react-stack-top-frame"):k,D?I(d(e)):V)},U.jsxs=function(e,r,l,g,C){var D=1e4>A.recentlyCreatedOwnerStacks++;return b(e,r,l,!0,g,C,D?Error("react-stack-top-frame"):k,D?I(d(e)):V)}}()),U}var ee;function oe(){return ee||(ee=1,process.env.NODE_ENV==="production"?X.exports=ne():X.exports=ae()),X.exports}var w=oe();const se=({position:n,rects:y,horizontal:m,flexWrap:d})=>{if(y.length===0)return-1;let i=-1,c=1/0;const f=y.reduce((t,a)=>(t.top=Math.min(t.top,a.top),t.left=Math.min(t.left,a.left),t.right=Math.max(t.right,a.right),t.bottom=Math.max(t.bottom,a.bottom),t),{top:1/0,left:1/0,right:-1/0,bottom:-1/0});return y.forEach((t,a)=>{let h;if(d)if(n.x>=f.left&&n.x<=f.right&&n.y>=f.top&&n.y<=f.bottom){const b=t.left+t.width/2,E=t.top+t.height/2;h=Math.sqrt(Math.pow(n.x-b,2)+Math.pow(n.y-E,2))}else{const b=Math.max(t.left-n.x,0,n.x-t.right),E=Math.max(t.top-n.y,0,n.y-t.bottom);h=Math.sqrt(Math.pow(b,2)+Math.pow(E,2))}else{const b=m?t.left+t.width/2:t.top+t.height/2;h=Math.abs(m?n.x-b:n.y-b)}h<c&&(c=h,i=a)}),i},te=({initialData:n,horizontal:y,flexWrap:m,staticMove:d=!1,draggable:i,onDragStart:c,onDragMove:f,onDragEnd:t})=>{const[a,h]=x.useState(n),[b,E]=x.useState(null),[u,j]=x.useState(null),[s,o]=x.useState(null),[S,_]=x.useState({width:0,height:0}),[T,M]=x.useState(null),O=x.useRef(n),L=x.useRef(null),B=(v,R)=>{if(i===!1){v.preventDefault();const A=v.currentTarget.getBoundingClientRect();j(R),o(a[R]),_({width:A.width,height:A.height}),E({x:v.clientX,y:v.clientY}),O.current=a,c?.(a,R)}},G=v=>{if(u===null||!L.current)return;const R={x:v.clientX,y:v.clientY};E(R);const J=Array.from(L.current.children).map(P=>P.getBoundingClientRect()),H=d||u===-1?J:J.filter((P,k)=>k!==u),I=se({position:R,rects:H,horizontal:y,flexWrap:m});if(I===-1||I===null)return;let z=I;if(I>=u&&(z=I+1),d)M(I);else{const P=a.findIndex(k=>k===s);if(P!==-1&&z!==P){const k=[...a],[V]=k.splice(P,1);k.splice(z,0,V),h(k)}}f?.(a,u)},Y=()=>{if(u===null)return;let v=-1;if(d)if(T!==null&&T!==u){const R=[...O.current],[A]=R.splice(u,1);R.splice(T,0,A),h(R),v=T}else h(O.current),v=u;else v=a.findIndex(R=>R===s);t?.(a,v),j(null),o(null),E(null),M(null)};return x.useEffect(()=>{if(s&&i===!1)return window.addEventListener("mousemove",G),window.addEventListener("mouseup",Y),()=>{window.removeEventListener("mousemove",G),window.removeEventListener("mouseup",Y)}},[u,s,T,a,d,i]),{list:a,listRef:L,draggingItem:u,draggingItemData:s,position:b,dragItemSize:S,dropTargetIndex:d?T:null,itemDrag:B,itemMove:G,itemDrop:Y}},ie=n=>{const{items:y,renderItem:m,getKey:d,horizontal:i=!1,flexWrap:c=!1,uniformSize:f,staticMove:t=!1,draggable:a=!1,onDragStart:h,onDragMove:b,onDragEnd:E,containerStyle:u,itemStyle:j,targetItemStyle:s}=n,o=te({initialData:y,horizontal:i,flexWrap:c,staticMove:t,draggable:a,onDragStart:h,onDragMove:b,onDragEnd:E});return w.jsxs(w.Fragment,{children:[w.jsx("ul",{ref:o.listRef,className:"dynamic-list-container",style:{position:"relative",listStyle:"none",padding:"0",margin:"0",display:"flex",flexWrap:c?"wrap":void 0,flexDirection:i?"row":"column",...u},children:o.list.map((S,_)=>{const T=!t&&S===o.draggingItemData,M=T&&o.position?{display:"none",cursor:a?"default":"grab"}:{transition:"transform 0.2s ease",cursor:a?"default":"grab",flex:f?1:void 0},O=t&&_===o.dropTargetIndex;return w.jsx("li",{onMouseDown:L=>o.itemDrag(L,_),className:`dynamic-list-item ${T?"grabbed":"not-grabbed"} ${O?"drop-target":""}`,style:{...M,...j},children:m(S)},d?.(S)||_)})}),o.draggingItemData&&o.position&&w.jsx("div",{className:"dynamic-list-item grabbed",style:{position:"absolute",zIndex:1e3,left:o.position.x-o.dragItemSize.width/2,top:o.position.y-o.dragItemSize.height/2,width:o.dragItemSize.width,height:o.dragItemSize.height,background:"#fff",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",transform:"scale(0.95)",transition:"transform 0.2s ease",cursor:a?"default":"grab",...s},children:m(o.draggingItemData)})]})},le=n=>{const{items:y,renderItem:m,getKey:d,cols:i=4,rows:c,staticMove:f=!1,draggable:t=!1,onDragStart:a,onDragMove:h,onDragEnd:b,containerStyle:E,itemStyle:u,targetItemStyle:j}=n,s=te({initialData:y,flexWrap:!0,staticMove:f,draggable:t,onDragStart:a,onDragMove:h,onDragEnd:b});return w.jsxs(w.Fragment,{children:[w.jsx("ul",{ref:s.listRef,className:"dynamic-list-container",style:{position:"relative",listStyle:"none",padding:"0",margin:"0",display:"grid",gridTemplateColumns:i?`repeat(${i}, minmax(0, 1fr))`:void 0,gridTemplateRows:c?`repeat(${c}, minmax(0, 1fr))`:void 0,...E},children:s.list.map((o,S)=>{const _=!f&&o===s.draggingItemData,T=_&&s.position?{display:"none",cursor:t?"default":"grab"}:{transition:"transform 0.2s ease",cursor:t?"default":"grab"},M=f&&S===s.dropTargetIndex;return w.jsx("li",{onMouseDown:O=>s.itemDrag(O,S),className:`dynamic-list-item ${_?"grabbed":"not-grabbed"} ${M?"drop-target":""}`,style:{...T,...u},children:m(o)},d?.(o)||S)})}),s.draggingItemData&&s.position&&w.jsx("div",{className:"dynamic-list-item grabbed",style:{position:"absolute",zIndex:1e3,left:s.position.x-s.dragItemSize.width/2,top:s.position.y-s.dragItemSize.height/2,width:s.dragItemSize.width,height:s.dragItemSize.height,background:"#fff",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",transform:"scale(0.95)",transition:"transform 0.2s ease",cursor:t?"default":"grab",...j},children:m(s.draggingItemData)})]})};N.DynamicList=ie,N.GridList=le,Object.defineProperty(N,Symbol.toStringTag,{value:"Module"})});
